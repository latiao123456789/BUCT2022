

**总体设计报告**

[TOC]



# 1.引言

## 1.1编写目的

本项目为海外藏中国文物知识管理与服务平台，书写此文档是为了确定用户对本系统的真正需求，确定一份完整、准确、清晰、具体的系统要求及设计方案，从而有效地帮助开发人员实现此系统的各个模块和各项功能，也让用户对此系统有更全面的了解。

此文档包含了用户对系统的具体要求，系统的功能需求等；可作为用户需求的确定书和总体设计的依据，也是验证和维护系统的依据。

## 1.2背景

海外中国文物信息数据库的建立，能够较为全面地掌握海外中国文物信息，结合国内文物信息，能够形成相对完整的我国历史文物信息，可较好的研究和反映中国历史；其次为未来文物追索、文物征集和文物研究保护提供有力的协助。

软件名称：海外藏中国文物知识管理与服务平台

## 1.3 定义

VUE:用于前端页面显示

SpringBoot:用于后端连接数据库

SQL语言：用于数据库操纵的标准语言

Android Studio: Android集成开发工具，基于IntelliJ IDEA. 类似Eclipse ADT，Android Studio提供了集成的Android开发工具用于开发和调试。

 

## 1.4参考资料

（1）查询： 

克利夫兰博物馆：搜索界面包括简单搜索和高级搜索（advanced search）https://www.clevelandart.org/art/collection/search

（2）时间轴： 

时间轴工具：https://timeline.knightlab.com/

全历史时间轴：https://www.allhistory.com/

（3）知识图谱可视化： 

全历史关系图谱：（链接为单个主题示例，更多内容参考该网站-关系图谱） 

https://www.allhistory.com/relation?networkId=5cf8e3ecefe5550001f1435c

（4）关系图谱： 

历史人文大数据平台： 

https://dhc.library.sh.cn/relation?uri=http%3A%2F%2Fdata.library.sh.cn%2Fentity%2 Fperson%2F4lnpsgh342b2n1ru 

（5）关系图谱可视化工程参考（理解展示形式，实现方法自拟） 

https://emiliorizzo.github.io/vue-d3-network/      

（6）第一行代码第二版

（7）华为HMS生态与应用开发实战

# 2．任务概述

## 2.1 目标

### 2.1.1海外文物知识服务子系统

编写 Web 端程序，使用知识图谱构建子系统获取的数据，实现数据浏览、查询、可视化、问答等服务。

### 2.1.2掌上博物馆

掌上博物馆系统需要帮助用户实现文物浏览、用户交互、以图搜图、个人信息管理、个人动态等一系列功能，系统还要实现系统管理员对用户信息的增删查改、用户权限的管理，信息审核、数据管理以及备份、日志管理等一系列功能。

 

## 2.2 用户特点

### 2.2.1海外文物知识服务子系统：

最终用户为广大海外藏文物爱好者以及志愿者，均为普通电脑用户，由于本网站提供了图形化操作界面，使用起来非常方便，只要用户具备基本的上网知识，均可以使用。

### 2.2.2掌上博物馆

最终用户为广大文物爱好者与系统管理人员，均为普通手机端用户，只需用户具备基本的手机操作以及联网知识就可以使用。由于本系统属于科普和信息查询类的软件，需要系统24小时工作，对系统的稳定性需求较高。

 

# 3总体设计

## 3.1功能

### 3.1.1海外文物知识服务子系统

1）数据浏览：支持多种形式展示的浏览功能。①提供基本的筛选、排序功能，可按照文物类型、文物年代、博物馆等多种基础信息进行索引、筛选、排序方式浏览文物信息以方便用户的使用。②提供查看文物详情功能，显示文物的详细数据，如文本、图像等信息，点击文物图片，可以进行放大缩小。③相关文物推荐功能，在该文物页面显示相关文物，相关规则自定，如相似主题、同一作者、 图像内容相似等。可参考克利夫兰、大英博物馆等网站。 

2）数据查询：支持文物的简单查询功能和高级查询功能。简单查询根据输入的关键字，如文物名称、博物馆名称、文物年代等进行查询。高级查询可以对文物的多个字段进行限定查询，可参考克利夫兰博物馆。 

3）数据可视化显示：将构建的文物知识图谱可视化，以从不同角度等可视化效果，展示文物知识。可参考的可视化方案如下：①包含结点、边的力导向图知识图谱展示，可参考全历史网站、历史人文大数据平台、Neo4j 图数据库等。②文物时间轴：按照时间轴的方式、展示各个时段的文物信息、时间等信息。 

4）用户个人信息管理：用户可以注册登录该系统，设置用户名密码等个人信息。

### 3.1.2掌上博物馆

掌上博物馆APP旨在能让用户在手机移动端就可以对文物进行观看、点赞、评论等功能，方便用户的使用。具体需求说明如下：

（1） 注册：用户可以通过APP登录页面下方的注册按钮进入注册界面，输入手机号，服务器发送验证码给用户，用户输入正确验证码后，再输入两次同样的密码即可完成注册。

（2） 登录：用户可在登录页面输入账号（手机号），密码，完成登录，进入文物浏览界面。

（3） 修改个人信息：用户在侧边栏可进入个人信息界面，点击编辑个人资料即可修改个人信息。

（4） 搜索：用户可在搜索框内输入文物关键字来搜寻相应文物信息；也可以上传文物图片来进行搜索。

（5） 点赞、评论：用户在进入文物具体信息界面后，若想要进行点赞，可直接点击点赞按钮，若想评论，可直接在评论区内相应发言框进行评论，点赞与评论都是公开可见。

 

## 3.2运行环境

### 3.2.1海外文物知识服务子系统

服务器的硬件配置要求如下：
 CPU：Pentium 200以上，建议PII300以上
 RAM：256M以上，建议512M以上

客户机硬件配置要求如下：
 CPU：Pentium100以上，建议Pentium200以上
 RAM：32M以上，建议64M

### 3.2.2掌上博物馆

  系统硬件要求： 安卓6.0及以上
 DISK：100M以上的可用存储空间

 

## 3.3整个系统操作流图

### 3.3.1海外文物知识服务子系统

![img](file:///C:/Users/32832/AppData/Local/Temp/msohtmlclip1/01/clip_image001.png)

### 3.3.2掌上博物馆

​	![img](C:\Users\32832\AppData\Local\Temp\企业微信截图_16514175389969.png)

## 3.4结构

### 3.4.1 服务器端结构

​															![](file:///C:/Users/32832/AppData/Local/Temp/msohtmlclip1/01/clip_image016.png)

![img](file:///C:/Users/32832/AppData/Local/Temp/msohtmlclip1/01/clip_image017.png) 

 

 

 

 

 

 

 

 

 

 

 

 



### 3.4.2 客户端结构

 

​																		![文本框: 客户端结构模块](file:///C:/Users/32832/AppData/Local/Temp/msohtmlclip1/01/clip_image018.png)

|      |                                                              |      |                                                              |
| ---- | ------------------------------------------------------------ | ---- | ------------------------------------------------------------ |
|      | ![img](file:///C:/Users/32832/AppData/Local/Temp/msohtmlclip1/01/clip_image019.png) |      | ![img](file:///C:/Users/32832/AppData/Local/Temp/msohtmlclip1/01/clip_image020.png) |
|      |                                                              |      |                                                              |

# 4接口设计

## 4.1海外文物知识服务子系统

### 4.1.1用户接口

采用图形用户界面：

1.注册界面：输入用户信息，按确定提交内容。

2.查询界面：输入博物馆名称或文物年代或文物名称，按搜索得到查询信息，包括文物的详情。

### 4.1.2外部接口

服务器端采用vue和springboot来编写程序，通过axois驱动来访问数据库MySQL。

### 4.1.3内部接口

客户端界面获取用户的各项输入，根据不同的操作请求进入相应的操作模块，每个操作模块获取用户的输入数据，作为发送给服务端的数据消息加上通讯协议头发送到服务端。服务端接受到数据后，利用协议头解析判断将数据分配给相应的模块进行处理，并将处理结果发送回客户端。各个服务端处理模块通过axois和数据库进行交互。

  操作模块如下：

![img](file:///C:/Users/32832/AppData/Local/Temp/msohtmlclip1/01/clip_image021.png) 

## 4.2掌上博物馆

### 4.2.1用户接口

采用图形用户界面：

\1.  注册界面：输入用户手机号，接受验证码并输入，并输入两次密码即可注册成功；

\2.  登录界面：输入账号（手机号），密码；

2.查询界面：输入关键字或者文物图片，按搜索得到查询信息，包括文物的详细信息；

3.点赞、评论界面：点赞按钮以及评论区发言框； 

5.管理员修改：管理员具有此权限，可以修改用户权限以及删除

### 4.2.2外部接口

用java，xml来编写APP，数据库：mysql、neo4j

 

### 4.2.3内部接口

客户端界面获取用户的各项输入，根据不同的操作请求进入相应的操作模块，每个操作模块获取用户的输入数据，作为发送给服务端的数据消息加上通讯协议头发送到服务端。服务端接受到数据后，利用协议头解析判断将数据分配给相应的模块进行处理，并将处理结果发送回客户端。各个服务端处理模块通过ODBC和数据库进行交互。

操作模块如下：

![wps](file:///C:/Users/32832/AppData/Local/Temp/msohtmlclip1/01/clip_image023.png)

 

# 5运行设计

## 5.1运行模块组合

### 5.1.1海外文物知识服务子系统

各个不同的运行控制所经历的内部模块及支持软件如下彩所示：

5.1.1.1 注册：

![img](file:///C:/Users/32832/AppData/Local/Temp/msohtmlclip1/01/clip_image024.png) 

5.1.1.2 浏览

![img](file:///C:/Users/32832/AppData/Local/Temp/msohtmlclip1/01/clip_image025.png) 

5.1.1.3 评论模块：

###  

![img](file:///C:/Users/32832/AppData/Local/Temp/msohtmlclip1/01/clip_image026.png) 

5.1.1.4 搜索

###  

![img](file:///C:/Users/32832/AppData/Local/Temp/msohtmlclip1/01/clip_image027.png) 

 

5.1.1.5 用户修改个人信息：

###  

![img](file:///C:/Users/32832/AppData/Local/Temp/msohtmlclip1/01/clip_image028.png) 

### 5.1.2掌上博物馆

5.1.2.1 注册：

![wps](file:///C:/Users/32832/AppData/Local/Temp/msohtmlclip1/01/clip_image030.png)

5.1.2.2 查询：

![未命名文件(3)](file:///C:/Users/32832/AppData/Local/Temp/msohtmlclip1/01/clip_image032.png)

5.1.2.3 评论模块：

![未命名文件(3)](file:///C:/Users/32832/AppData/Local/Temp/msohtmlclip1/01/clip_image034.png)

5.1.2.4 用户修改个人信息：

![wps](file:///C:/Users/32832/AppData/Local/Temp/msohtmlclip1/01/clip_image035.png)

 

 

## 5.2 运行控制

​       

### 5.2.1海外文物知识服务子系统

5.2.1.1 注册以及登录

1、注册时用户会提供用户名、密码。用户的所有个人信息存于网站数据库中中，以用于登陆，收藏，查询等。

2、 用户名为不超过7个字的汉字或者不超过14个字节的数字字母下划线等。

3、注册时需设定6位数字密码，用户自行设置，后可修改密码。

4、用户若忘记密码，可通过填写真实姓名和邮箱信息以找回密码。

5、下图为用户的注册页面，有用户所需填的所有信息。 

 

5.2.1.2. 修改客户注册信息和忘记密码

1.用户注册成功后，可以修改信息，包括密码。

2.如果用户密码遗失，无法进行登陆操作，用户可点忘记密码，进入找回密码页面，需要用户填写真实姓名和电子邮箱，如果验证正确，系统会自动发送一封重设密码的电子邮件到用户的电子邮箱中，用户便可以以此进行密码的找回。

3.用户的重设密码邮件在一周内点击有效。

5.2.1.3 搜索和查询文物

1.搜索和查询文物详情在用户登陆状态或者游客状态均有此权限进行操作。

2.搜索文物时，可以根据关键字搜索，也可以根据文物的年限搜索

### 5.2.2掌上博物馆

5.2.2.1 注册以及会员登陆

1、注册时用户会提供手机号码，用于接收验证码，之后登陆后用户可修改个人信息，用户的所有个人信息存于网站数据库中中；

2、 密码为数字加字母组合，8位到16位，注册成功后用户可修改密码；

4、用户若忘记密码，可通过手机短信以找回密码；

5.2.2.2 搜索和查询文物

1.搜索和查询文物信息在用户登陆状态或者游客状态均有此权限进行操作。

2.用户可以根据关键词搜索文物，并且可以根据文物的点击次数、评论量、点击次数等对文物进行排序。

5.2.2.3 文物评论

1.文物详细信息页面，点击查看所有评论即可进入查看评论页面，此页面可以看到会员对该文物的评价。

2.点击输入框可以输入评论，点击发送即可发出评论。

 

## 5.3运行时间

端访问使用浏览器，网页代码不占用客户端时间，客户端和服务端通信占用网络传输时间，服务端对数据库操作占用服务器cpu时间。其中网络传输时间主要由网络传输速度决定，在网速较高的环境下不是主要考虑因素。服务器对数据库的操作时间取决于服务器性能及同时访问量的多少以及所使用的数据库功能，在大规模访问量之下，该时间可能会成为系统性能的瓶颈客户。

# 6系统数据结构设计

## 6.1逻辑结构设计要点

### 6.1.1海外文物知识服务子系统

**（****有下划线的属性为主键（****primary key****））**

文物：文物ID，文物名，所在博物馆名，文物年代，文物描述

用户：用户ID，用户名，密码，性别，地址，年龄

## 6. 2物理结构设计要点

### 6.2.1海外文物知识服务子系统

## 文物表：

![img](file:///C:/Users/32832/AppData/Local/Temp/msohtmlclip1/01/clip_image037.jpg)

用户表：

![img](file:///C:/Users/32832/AppData/Local/Temp/msohtmlclip1/01/clip_image039.jpg)

 

# 7系统出错处理设计

## 7.1出错信息

| 系统输出信息的形式 | 含义                                                         | 处理方法                                                     |
| ------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 同名注册           | A用户想注册账号名为ABC，B用户也想注册账号ABC；               | A用户提示该账号已存在不能使用该用户名注册。                  |
| 数据库连接不上     | 由于网路堵塞繁忙，数据库软件繁忙，连接数据库配置不正确等一些因素引起数据库连接不上 | 等待连接、修复网络、更改网络数据库配置等                     |
| SQL注入            | 访问more.php或者article.php页面时，人为修改参数或转十六进制添加SQL语句，导致数据库报错泄露数据库结构 | 对每个页面的参数进行严格过滤及审查，使用is_numeric参数判断，并在页面脚本执行之前先查询是否有该记录，合法后再继续。 |

 

 